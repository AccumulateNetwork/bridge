package abiutil

import (
	"testing"

	"github.com/ethereum/go-ethereum/common/hexutil"
	"github.com/stretchr/testify/assert"
)

func TestGenerateGnosisTx(t *testing.T) {

	want := "0x6a761202000000000000000000000000167da1a6074a68b3ae4df4205e9f44a1703cab660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000064c6c3bbe6000000000000000000000000555e7deddae1711fdef2490a32f27eb364cf343e000000000000000000000000221fb65cdb12cc5ec0f9a2afee52d6c5cef2b8bb0000000000000000000000000000000000000000000000000000000000000457000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082000000000000000000000000137c6df5cb6b0cd81a9b148f275a3ff32b5cfa80000000000000000000000000000000000000000000000000000000000000000001461ad3e46bf301a70b12e90115ee8cb8c3c54044fc8f5b6daa1a13cf9474717b695696589e9abdbc118efdb552446dd3ee2df535c2e92970ed0ee8807544ab0d1c000000000000000000000000000000000000000000000000000000000000"

	to := "0x167dA1A6074A68b3ae4dF4205e9f44a1703Cab66"
	txdata := "0xc6c3bbe6000000000000000000000000555e7deddae1711fdef2490a32f27eb364cf343e000000000000000000000000221fb65cdb12cc5ec0f9a2afee52d6c5cef2b8bb0000000000000000000000000000000000000000000000000000000000000457"
	signatures := "0x000000000000000000000000137c6df5cb6b0cd81a9b148f275a3ff32b5cfa80000000000000000000000000000000000000000000000000000000000000000001461ad3e46bf301a70b12e90115ee8cb8c3c54044fc8f5b6daa1a13cf9474717b695696589e9abdbc118efdb552446dd3ee2df535c2e92970ed0ee8807544ab0d1c"

	got, err := GenerateGnosisTx(to, txdata, signatures)
	assert.NoError(t, err)

	assert.Equal(t, want, hexutil.Encode(got))

}
